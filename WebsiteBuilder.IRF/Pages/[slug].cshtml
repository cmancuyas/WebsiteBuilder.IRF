@page
@model WebsiteBuilder.IRF.Pages._slug_Model

@{
    Layout = "_Layout"; // adjust if needed
}

@if (Model.IsPreview)
{
    <div class="alert alert-warning text-center rounded-0 mb-0">
        <strong>Preview Mode</strong> — You are viewing draft content.
        <a class="ms-3"
           href="/Admin/Pages/Edit/@Model.PageEntity!.Id">
            Back to Edit
        </a>
    </div>
}

@foreach (var section in Model.RenderSections)
{
    @await Component.InvokeAsync(
    "PageSection",
        new
        {
            sectionTypeId = section.SectionTypeId,
            settingsJson = section.SettingsJson
        })
}
