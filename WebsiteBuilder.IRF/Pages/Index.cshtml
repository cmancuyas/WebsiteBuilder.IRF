@page
@using Microsoft.EntityFrameworkCore
@model WebsiteBuilder.IRF.Pages.IndexModel

@{
    var isDev = Environment.GetEnvironmentVariable("ASPNETCORE_ENVIRONMENT") == "Development";
    var adminUrl = "https://chris.yourplatform.com:7274/admin/pages";
}

@if (isDev)
{
    <div style="position:fixed; bottom:16px; right:16px; z-index:9999;">
        <a href="@adminUrl"
           class="btn btn-sm btn-outline-secondary">
            Admin Pages
        </a>
    </div>
}

@if (!Model.IsTenantResolved)
{
    <div class="container py-5">
        <h1 class="mb-3">WebsiteBuilder</h1>
        <p class="text-muted mb-0">
            Platform landing page (tenant not resolved).
        </p>
    </div>
}
else
{
    <div class="container py-5">
        <h1 class="mb-3">Tenant detected</h1>

        <div class="mb-3">
            <div><strong>Tenant Host:</strong> @Model.TenantHost</div>
            <div><strong>Tenant Id:</strong> @Model.TenantId</div>
        </div>

        @if (Model.TenantEntity is null)
        {
            <div class="alert alert-warning mb-0">
                Tenant record not found or inactive.
            </div>
        }
        else if (Model.TenantEntity.HomePageId is null)
        {
            <div class="alert alert-info mb-0">
                This tenant has no HomePage configured yet.
            </div>
        }
        else
        {
            <div class="alert alert-secondary mb-0">
                Resolving tenant home page…
            </div>
        }
    </div>
}
